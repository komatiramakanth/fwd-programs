<!DOCTYPE html>
<html>
<head>
    <title>Faculty Analytics</title>
    <style>
        .card {
            display: inline-block;
            padding: 15px;
            margin: 10px;
            border: 1px solid #333;
            width: 150px;
            text-align: center;
        }
    </style>
</head>
<body>
  <link rel="stylesheet" href="/public/css/style.css">

<nav>
    <a href="/faculty-dashboard.html">Dashboard</a>
    <a href="/faculty-analytics.html">Analytics</a>
    <a href="/faculty-deadline.html">Deadline</a>
    <a href="/faculty/export">Export Excel</a>
    <a href="/faculty/download-zip">Download ZIP</a>
    <a href="/logout">Logout</a>
</nav>
<div class="container">
    <h2>Analytics Dashboard</h2>

    <div id="summary">
        <div class="card">
            <h3>Total</h3>
            <p id="total"></p>
        </div>

        <div class="card">
            <h3>Pending</h3>
            <p id="pending"></p>
        </div>

        <div class="card">
            <h3>Approved</h3>
            <p id="approved"></p>
        </div>

        <div class="card">
            <h3>Rejected</h3>
            <p id="rejected"></p>
        </div>
    </div>

    <h3>Section-wise Submissions</h3>

    <table border="1">
        <thead>
            <tr>
                <th>Section</th>
                <th>Submission Count</th>
            </tr>
        </thead>
        <tbody id="sectionTable"></tbody>
    </table>
</div>
    <script>
        async function loadAnalytics() {
            const response = await fetch('/faculty/analytics');
            const data = await response.json();

            document.getElementById('total').innerText = data.overall.Total || 0;
            document.getElementById('pending').innerText = data.overall.Pending || 0;
            document.getElementById('approved').innerText = data.overall.Approved || 0;
            document.getElementById('rejected').innerText = data.overall.Rejected || 0;

            const table = document.getElementById('sectionTable');
            table.innerHTML = '';

            data.sectionWise.forEach(sec => {
                const row = `
                    <tr>
                        <td>${sec.Section}</td>
                        <td>${sec.SubmissionCount}</td>
                    </tr>
                `;
                table.innerHTML += row;
            });
        }

        loadAnalytics();
    </script>
</body>
</html>
